(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{Clg3:function(e,t,a){"use strict";a.r(t);var s=a("kQN2"),r=a("X/aF"),i=a("WaG5"),n={mixins:[s.a],data:function(){var e=this;return{statuses:i.a,disabled:!1,BasicModalOptions:r.a,item_fields:[{key:"id",label:_t("id","ID")},{key:"product",label:_t("product_name","Product Name"),formatter:function(e){return[e.id,e.name].join(" # ")}},{key:"quantity",label:_t("quantity","Quantity"),formatter:function(t){return e.$options.filters.localNumber(t)}},{key:"price",label:_t("price","Price"),formatter:function(t){return e.$options.filters.currency(t)}},{key:"total",label:_t("total","Total"),formatter:function(t){return e.$options.filters.currency(t)}}]}},methods:{changeStatus:function(e){var t=this;axios.post(route("Backend.Orders.ChangeStatus",{order:this.the_item.id}),{status:e}).then((function(e){t.$root.msgBox(e.data),t.getItem(t.the_item.id,route("Backend.Orders.List")).then((function(e){t.the_item=e.data})).catch((function(e){return console.log(e.response)}))})).catch((function(e){console.log(e.response),t.$root.msgBox(e.response.data)}))},makeSale:function(e){var t=this;this.disabled=!0,e&&axios.post(route("Backend.Orders.MakeSale",{order:this.the_item.id}),{status:e}).then((function(e){t.$root.msgBox(e.data),t.getItem(t.the_item.id,route("Backend.Orders.List")).then((function(e){t.the_item=e.data})).catch((function(e){return console.log(e.response)}))})).catch((function(e){console.log(e.response),t.$root.msgBox(e.response.data)}))}}},o=a("KHd+"),d=Object(o.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",e._b({attrs:{visible:"",title:e.__("view_order","View Order")},on:{hidden:function(t){e.$router.go(-1),e.$emit("reset",!0)}}},"b-modal",Object.assign({},e.BasicModalOptions,{size:"xl"}),!1),[a("b-form-row",[a("b-col",{attrs:{md:"4",sm:"12"}},[a("b-card",{attrs:{header:e.__("customer_details","Customer Details"),"header-bg-variant":"dark","header-text-variant":"light","body-class":"p-0"}},[e.the_item&&e.the_item.customer?a("b-table",{staticClass:"mb-0",attrs:{"thead-class":"d-none",small:"",hover:"",striped:"",bordered:"","head-variant":"dark",fields:[{key:"key",formatter:function(t){return e.__(t)}},"value"],items:e.obj2Table(e.the_item.customer)}}):e._e()],1)],1),e._v(" "),a("b-col",{staticClass:"my-sm-3 my-md-0",attrs:{md:"4",sm:"12"}},[a("b-card",{attrs:{header:e.__("user_details","User Details"),"header-bg-variant":"dark","header-text-variant":"light","body-class":"p-0"}},[e.the_item&&e.the_item.user?a("b-table",{staticClass:"mb-0",attrs:{"thead-class":"d-none",small:"",hover:"",striped:"",bordered:"","head-variant":"dark",fields:[{key:"key",formatter:function(t){return e.__(t)}},"value"],items:e.obj2Table(e.the_item.user)}}):e._e()],1)],1),e._v(" "),a("b-col",{attrs:{md:"4",sm:"12"}},[a("b-card",{attrs:{header:e.__("order_details","Order Details"),"body-class":"p-0","header-bg-variant":"dark","header-text-variant":"light"}},[a("b-table",{staticClass:"mb-0",attrs:{small:"",bordered:"",hover:"",striped:"","thead-class":"d-none","head-variant":"dark",items:e.obj2Table(e.the_item,["deleted_at","user_id","customer_id","customer_title","customer","items","user"]),fields:[{key:"key",sortable:!0,label:e.__("key","Key"),formatter:function(t){return e.__(t,e.startCase(t))}},{key:"value",label:e.__("value","Value"),sortable:!0}]},scopedSlots:e._u([{key:"cell(value)",fn:function(t){return[["created_at","updated_at"].includes(t.item.key)?[e._v("\n                            "+e._s(e._f("localDateTime")(t.item.value))+"\n                        ")]:["description"].includes(t.item.key)?[a("div",{domProps:{innerHTML:e._s(t.item.value)}})]:[e._v(e._s(t.item.value))]]}}])})],1)],1)],1),e._v(" "),a("b-card",{staticClass:"mt-4",attrs:{header:e.__("order_items","Order Items"),"header-bg-variant":"dark","header-text-variant":"light","body-class":"p-0"}},[e.the_item&&e.the_item.items&&Array.isArray(e.the_item.items)?a("b-table",{staticClass:"mb-0",attrs:{small:"",hover:"",responsive:!0,striped:"",bordered:"","head-variant":"dark",fields:e.item_fields,items:e.the_item.items}}):e._e()],1),e._v(" "),a("h2",{staticClass:"text-center my-3"},[e._v("\n        "+e._s(e.__("status","Status"))+"\n    ")]),e._v(" "),a("b-form",{on:{submit:function(e){e.preventDefault()}}},[a("b-form-group",{staticClass:"text-center"},[a("b-form-radio-group",{attrs:{name:"order-status",options:e.statuses},on:{change:e.changeStatus},model:{value:e.the_item.status,callback:function(t){e.$set(e.the_item,"status",t)},expression:"the_item.status"}})],1),e._v(" "),a("b-form-group",{staticClass:"text-center"},[e.the_item.sale_id||e.disabled?e._e():a("b-checkbox",{attrs:{checked:!!Number(e.the_item.sale_id),switch:""},on:{change:e.makeSale}},[e._v("\n                "+e._s(e.__("create_sale","Create Sale"))+"\n            ")]),e._v(" "),e.the_item.sale_id?[a("b-button",{attrs:{target:"_blank",size:"sm",variant:"dark",href:e.route("Backend.Sales.Invoice.PDF",{sale:e.the_item.sale_id,type:"pdf",is_delivery:"no",invoice_both:"no"})}},[e._v("\n                    Cash Memo\n                ")]),e._v(" "),a("b-button",{attrs:{target:"_blank",size:"sm",variant:"dark",href:e.route("Backend.Sales.Invoice.PDF",{sale:e.the_item.sale_id,type:"pdf",is_delivery:"yes",invoice_both:"no"})}},[e._v("\n                    Delivery Slip\n                ")]),e._v(" "),a("b-button",{attrs:{target:"_blank",size:"sm",variant:"dark",href:e.route("Backend.Sales.Invoice.PDF",{sale:e.the_item.sale_id,type:"pdf",is_delivery:"no",invoice_both:"yes"})}},[e._v("\n                    Cash & Delivery Memo\n                ")])]:e._e()],2)],1)],1)}),[],!1,null,null,null);t.default=d.exports},WaG5:function(e,t,a){"use strict";t.a=[{text:_t("pending","Pending"),value:"Pending"},{text:_t("accepted","Accepted"),value:"Accepted"},{text:_t("returned","Returned"),value:"Returned"},{text:_t("processed","Processed"),value:"Processed"},{text:_t("cancelled","Cancelled"),value:"Cancelled"}]},kQN2:function(e,t,a){"use strict";var s=a("X/aF"),r=a("EIrz");t.a={props:{item:{type:Object,default:function(){return{}}}},methods:{obj2Table:s.m,startCase:r.a,getItem:s.g},data:function(){return{the_item:{}}},mounted:function(){var e=this;this.the_item=this.item,this.the_item&&Object.keys(this.item).length||this.getItem(this.$route.params.id,this.$parent.$props.api_url||this.$parent._data.api_url).then((function(t){e.the_item=t.data})).catch((function(e){return console.log(e.response)}))}}}}]);